(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{414:function(t,e,s){"use strict";s.r(e);var a=s(56),v=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"git"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git"}},[t._v("#")]),t._v(" git")]),t._v(" "),s("h2",{attrs:{id:"git-merge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git-merge"}},[t._v("#")]),t._v(" git merge")]),t._v(" "),s("h3",{attrs:{id:"squash"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#squash"}},[t._v("#")]),t._v(" --squash")]),t._v(" "),s("p",[t._v("通常我们开发的时候会从主分支上拉取开发分支，开发完成后执行"),s("code",[t._v("git merge")]),t._v("命令把开发内容合并到主分支")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("新增开发分支"),s("code",[t._v("dev-v1.0.0")]),t._v("，并生成2次"),s("code",[t._v("commit")])])]),t._v(" "),s("li",[s("p",[t._v("新增开发分支"),s("code",[t._v("dev-v2.0.0")]),t._v("，并生成2次"),s("code",[t._v("commit")])])])]),t._v(" "),s("p",[t._v("此时提交记录如下")]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/git001.png"),alt:"git001"}}),t._v(" "),s("p",[t._v("此时"),s("code",[t._v("main")]),t._v("分支只有1个"),s("code",[t._v("commit")])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/git002.png"),alt:"git002"}}),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("把"),s("code",[t._v("dev-v1.0.0")]),t._v("合并到"),s("code",[t._v("main")]),t._v("，执行"),s("code",[t._v("git merge")]),t._v("命令。此时"),s("code",[t._v("main")]),t._v("分支生成2个来自"),s("code",[t._v("dev-v1.0.0")]),t._v("的"),s("code",[t._v("commit")])])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/git003.png"),alt:"git003"}}),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("把"),s("code",[t._v("dev-v2.0.0")]),t._v("合并到"),s("code",[t._v("main")]),t._v("，执行"),s("code",[t._v("git merge --squash")]),t._v("命令。此时"),s("code",[t._v("main")]),t._v("分支生成1个新"),s("code",[t._v("commit")]),t._v("，内容是"),s("code",[t._v("dev-v2.0.0")]),t._v("的所有改动。此时提交记录如下（"),s("code",[t._v("main")]),t._v("分支也做了1次"),s("code",[t._v("commit")]),t._v("）:")])]),t._v(" "),s("blockquote",[s("p",[t._v("显示当前分支")])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/git004.png"),alt:"git004"}}),t._v(" "),s("blockquote",[s("p",[t._v("显示所有分支")])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/git005.png"),alt:"git005"}}),t._v(" "),s("ul",[s("li",[s("code",[t._v("git merge")]),t._v("命令能够在合并的目标分支上保留提交记录")]),t._v(" "),s("li",[s("code",[t._v("git merge --squash")]),t._v("命令可以让主分支的"),s("code",[t._v("commit")]),t._v("数量减少，能够更清楚地看出主分支上迭代了那些功能")])]),t._v(" "),s("h3",{attrs:{id:"git-reset"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git-reset"}},[t._v("#")]),t._v(" git reset")]),t._v(" "),s("p",[s("code",[t._v("git reset")]),t._v("命令用于重置代码，一共有四个参数："),s("code",[t._v("--soft")]),t._v("，"),s("code",[t._v("--mixed")]),t._v("（默认值），"),s("code",[t._v("--hard")]),t._v("，"),s("code",[t._v("--merge")]),t._v("。")]),t._v(" "),s("p",[t._v("重点关注一下"),s("code",[t._v("git reset --hard")]),t._v("：重置到某个"),s("code",[t._v("commit")]),t._v("后，这个"),s("code",[t._v("commit")]),t._v("之后工作区、暂存区、本地仓库所有的改动都会重置")]),t._v(" "),s("p",[t._v("如下图所示:")]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/git006.png"),alt:"git006"}}),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//远程仓库")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//本地仓库")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//暂存区")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" d "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//工作区")]),t._v("\n")])])]),s("p",[t._v("执行 "),s("code",[t._v("git reset f4eaf51fe5be5de981cbf1ed28f6ba7b25167b88 --hard")]),t._v(" 重置到线上最新的"),s("code",[t._v("commit")]),t._v("。此时可以发现工作区、暂存区、本次仓库的改动都重置了")]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/git007.png"),alt:"git007"}}),t._v(" "),s("p",[t._v("如果我们重置到线上最新提交的前一个"),s("code",[t._v("commit")]),t._v("，这时必须执行"),s("code",[t._v("git push --force")])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/git008.png"),alt:"git008"}}),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/git009.png"),alt:"git009"}}),t._v(" "),s("h3",{attrs:{id:"git-revert"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git-revert"}},[t._v("#")]),t._v(" git revert")]),t._v(" "),s("p",[s("code",[t._v("git revert")]),t._v("也有回退代码的功能，与"),s("code",[t._v("git reset")]),t._v("不同的是，"),s("code",[t._v("git revert")])]),t._v(" "),s("p",[t._v("如下图所示，针对"),s("code",[t._v("revert.js")]),t._v("文件有三次提交")]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/git010.png"),alt:"git010"}}),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//第一次commit")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//第二次commit")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//第三次commit")]),t._v("\n")])])]),s("ol",[s("li",[t._v("回退1次提交，只保留这个提交之前的内容"),s("code",[t._v("git revert 015a78b67294b4f989534abdc712af163a7f1d6a")]),t._v("，此时产生了一个新的提交覆盖原来的内容，")])]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/git011.png"),alt:"git011"}}),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),s("p",[t._v("此时再次回退3个提交，"),s("code",[t._v("git revert daf9418b60c8a0f44d4cdc49d315b127d8c0e443")]),t._v(",")]),t._v(" "),s("img",{attrs:{src:t.$withBase("/images/git011.png"),alt:"git011"}}),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=v.exports}}]);